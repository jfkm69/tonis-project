<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Toni's Cakes and Pastries</title>

		<!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
		<!-- <link href="css/custom.css" rel="stylesheet"> -->
		<!-- <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->

		<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

		<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Rancho" rel="stylesheet">

		<script type="text/javascript">
			function addToCart(id){
				document.getElementById("orders").innerHTML += "1 soda @ KES 30";
			}
			function addItem(){
			//Check for null fields
			if (document.getElementById('itemName').value != "" && document.getElementById('itemPrice').value != "" && document.getElementById('units').value != ""){
				//Get the value of the rows
				var name = document.getElementById('itemName').value;
				var price = document.getElementById('itemPrice').value;
				var units = document.getElementById('units').value;
				var type = document.getElementById('type').value;

				addRow(name, price, units, type);

			    clear();
			} else {
				alert("please fill everything.");
			}
		}

		function addRow(name, price, units, type){
				var rows = "";

				rows += '<td class="col-lg-3">'+name+'</td><td class="col-lg-3">'+price+'</td><td class="col-lg-3">'+units+'</td><td class="col-lg-3">'+type+'</td><td class="col-lg-1"><img src="images/edit.png" width="15px" height="15px" onclick="getRowInfo()"></td><td class="col-lg-1"><img src="images/bin.png" width="20px" height="20px" onclick="deleteRow()"></td>';
				var tbody = document.querySelector("#list tbody");
			    var tr = document.createElement("tr");
			    var thead = document.querySelector("#list thead");

			    tr.innerHTML = rows;
			    tbody.appendChild(tr);
		}

		function getRowId(){
			var rows = document.getElementById('list').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
		    for (i = 0; i < rows.length; i++) {
		        rows[i].onclick = function() {
		            return this.rowIndex;
		        }
		    }
		}

		function deleteRow(){
			var rows = document.getElementById('list').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
		    for (i = 0; i < rows.length; i++) {
		        rows[i].onclick = function() {
					document.getElementById("list").deleteRow(this.rowIndex);
		        }
		    }
		}

		function getRowInfo() {
			var rows = document.getElementById('list').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
		    for (i = 0; i < rows.length; i++) {
		        rows[i].onclick = function() {
		            document.getElementById('item').style.display = "block";
		            $('#itemName').val($('#list tr').eq(this.rowIndex).find('td').eq(0).text());
		            $('#itemPrice').val($('#list tr').eq(this.rowIndex).find('td').eq(1).text());
		            $('#units').val($('#list tr').eq(this.rowIndex).find('td').eq(2).text());
		            $('#type').val($('#list tr').eq(this.rowIndex).find('td').eq(3).text());
		            cItem = this.rowIndex;
		        }
		    }
		    document.getElementById('editProdItem').style.display = "block";
		    document.getElementById('addProdItem').style.display = "none";
		}

		function editItem(){
				var name = document.getElementById('itemName').value;
				var price = document.getElementById('itemPrice').value;
				var units = document.getElementById('units').value;
				var type = document.getElementById('type').value;

				console.log(cItem);

				$('#list tr').eq(cItem).find('td').eq(0).text(name);
		        $('#list tr').eq(cItem).find('td').eq(1).text(price);
		        $('#list tr').eq(cItem).find('td').eq(2).text(units);
		        $('#list tr').eq(cItem).find('td').eq(3).text(type);

		        clear();

		        document.getElementById('editProdItem').style.display = "none";
			    document.getElementById('addProdItem').style.display = "block";
		}

		function clear(){
			document.getElementById('itemName').value = "";
			document.getElementById('itemPrice').value = "";
			document.getElementById('units').value = "";
		}

		function rotateMe(e) {
			var rotate_angle = (180 + rotate_angle) % 360;
			$(e).rotate(rotate_angle);
		}
	</script>
	<script>
		//The ID of the beacon asssociated with the ad
		var beacon_id;
		var title;
		var upFile;

		function readTblValues()
		{
		var TableData = '';
		$('#tableResult').val('');  // clear textbox
		$('#list tr').each(function(row, tr){
		  TableData = TableData 
		      + $(tr).find('td:eq(0)').text() + ' '  // Name
		      + $(tr).find('td:eq(1)').text() + ' '  // Price
		      + $(tr).find('td:eq(2)').text() + ' '  // Units
		      + $(tr).find('td:eq(3)').text() + ' '  // Type
		      + '\n';
		});
		$('#tableResult').val(TableData); //Put the result in the textarea
		}

		function storeTblValues()
		{
		var TableData = new Array();

		$('#list tr').each(function(row, tr){
		  TableData[row]={
		  	"beaconID": beacon_id
		      ,"itemName" : $(tr).find('td:eq(0)').text()
		      , "itemPrice" :$(tr).find('td:eq(1)').text()
		      , "units" : $(tr).find('td:eq(2)').text()
		      , "type" : $(tr).find('td:eq(3)').text()
		  }
		}); 
		TableData.shift();  // first row will be empty - so remove
		return TableData;
		}

		function convertArrayToJSON() {
		var TableData;
		TableData = $.toJSON(storeTblValues());
		$('#tableResult').val('JSON array: \n\n' + TableData.replace(/},/g, "},\n"));
		return TableData;
		}

		function getBeaconID(){
			var beaconName = document.getElementById('beaconName').value;

			$.ajax({
				type: "POST",
				url: "getBeaconID.php",
				data: "beaconName="+beaconName,

				success: function(beaconID){
					beacon_id = beaconID;
					if (beaconID > 0) {
						document.getElementById('error_get_beacon_id').style.display = "none";
						document.getElementById('tickBeaconAd').style.display = "block";
						document.getElementById('adInfo').style.display="block";
						$('#tableResult').val('Server Response:\\\\\\\\n\\\\\\\\n' + beaconID);
					} else {
						document.getElementById('error_get_beacon_id').style.display = "block";
						document.getElementById('tickBeaconAd').style.display = "none";
						if (beaconID == 0)
						document.getElementById('error_get_beacon_id').innerHTML = "No beacons associated with name!";
						if (beaconID == -1)
						document.getElementById('error_get_beacon_id').innerHTML = "Beacon already associated with ad";
						$('#tableResult').val('Server Response:\\\\\\\\n\\\\\\\\n' + beaconID);
					}

				}
			})
		}

		function sendTblDataToServer()
		{
		var TableData;
		TableData = $.toJSON(storeTblValues());
		$('#tableResult').val('JSON array to send to server: \n\n' + TableData.replace(/},/g, "},\n"));

		$.ajax({
		type: "POST",
		url: "setProductWeb.php",
		data: {pTableData:TableData},

		success: function(msg){
		  // return value stored in msg variable 
		  $('#tableResult').val('Server Response:\\\\\\\\n\\\\\\\\n' + msg);
		}
		});
		}

		</script>

	</head>
	<body>
		<!-- Navigation bar -->
		<nav class="navbar" style="padding-bottom: 0px !important; background-color: #009900;">
			<div class="container-fluid">
				<div class="navbar-header">
	  				<a class="navbar-brand" href="index.html" style="color: #fff;">Toni's</a>
				</div>
				<!-- <ul class="nav navbar-nav navbar-right">
	  				<li><a href="#"><span class="glyphicon glyphicon-user" style="color: #fff;"></span> Sign Up</a></li>
	  				<li><a href="#"><span class="glyphicon glyphicon-log-in" style="color: #fff;"></span> Login</a></li>
				</ul> -->
  			</div>
		</nav>

		<!-- Header -->
		<div class="header" style="height: 400px !important; background-image: url('img/DeathtoStock_Wired4.jpg') !important;">
			<div class="header-form text-vertical-center">
				<h1> Toni's </h1>
			</div>
		</div>

		<div class="container-fluid" style="padding-top: 15px; position: relative;">
			<div class="row col-lg-8 col-lg-offset-2" align="center">
				<!-- Mini Navigation or search -->
				<div class="col-lg-2 col-sm-2" style="height: auto; width: 300px;">
					<ul style="display: block; list-style: none;">
						<li> <h2 align="left">Menu</h2> </li>
						<hr>
						<li style="padding: 20px 20px;">
							Fast Food
							<i class="fa fa-chevron-right" align="right" style="float: left;"> </i>
						</li>
						<li style="padding: 20px 20px;">
							Drinks and Snacks
							<i class="fa fa-chevron-right" style="float: left;"> </i>
						</li>
						<li style="padding: 20px 20px;">
							Special Orders
							<i class="fa fa-chevron-right" style="float: left;"> </i>
						</li>
					</ul>
				</div>
				<!-- displaying of items -->
				<div class="col-lg-4 col-sm-4" style="height: auto; width: 600px;">
					<div style="display: block;">
						<h2 align="left">Drinks and Snacks</h2>
						<hr>
						<ul style="display: block; list-style: none;">
							<li style="display: inline-block; margin-left: 0;">
								<p class="item-name" style="display: inline-block; float: left; padding: 15px 15px;">
									Fanta Soda
								</p>
								<p class="item-cost" style="display: inline-block; float: right; padding: 15px 15px;">
									KES 30.00
									<a onclick="addToCart()" id="soda"><i class="fa fa-plus-square" style="padding-left: 20px; padding-right: 20px;" aria-hidden="true"></i>add</a>
								</p>
								<div class="item-picture" style="display: inline-block; float: left; padding: 15px 15px;">
									<img src="img/photo-1463183665146-ce2ed31df6b0.jpg" class="img-responsive" style="max-width: 130px !important; height: 120px !important;">
								</div>
							</li>

							<li style="display: inline-block; margin-left: 0;">
								<p class="item-name" style="display: inline-block; float: left; padding: 15px 15px;">
									Fanta Soda
								</p>
								<p class="item-cost" style="display: inline-block; float: right; padding: 15px 15px;">
									KES 30.00
									<a onclick="addToCart()" id="water"><i class="fa fa-plus-square" style="padding-left: 20px; padding-right: 20px;" aria-hidden="true"></i>add</a>
								</p>
								<div class="item-picture" style="display: inline-block; float: left; padding: 15px 15px;">
									<img src="img/photo-1463183665146-ce2ed31df6b0.jpg" class="img-responsive" style="max-width: 130px !important; height: 120px !important;">
								</div>
							</li>
						</ul>
					</div>
				</div>

				<!-- Cart -->
				<div class="col-lg-2 col-sm-2" style="/*position: fixed;*/ height: auto; width: 300px;">
					<h2 align="left">Your Order</h2>
					<hr>
					<div id="orders" class="bg-success">
						<table>
							<tr>
								<td>1</td>
								<td width="100px;"></td>
								<td>Fanta Orange</td>

							</tr>
						</table>
					</div>
					<div style="width: 100%; height: 30px;"></div>
					<table>
						<tr>
							<td align="left" style="float: left;"> Total </td>
							<td width="100px;"></td>
							<td align="right" style="float: right;"> KES 100 </td>
						</tr>
					</table>
					<button class="btn btn-success btn-light" style="text-align: center; background-color: #009900; color: #fff; height: 40px; width: 80%;"> ORDER NOW </button>
				</div>
			</div>
		</div>

	</body>
</html>
